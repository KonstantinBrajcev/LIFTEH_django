<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Добавить АВР</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css">
</head>
<body style="margin: 15px;">
    <h1>Добавить АВР</h1>
    <hr>
    <script>
      function addWorkRow() {
          const container = document.getElementById('work-rows');
          const newRow = document.createElement('div');
          newRow.innerHTML = `
<div id="work-rows" style="display: flex; gap: 10px; align-items: flex-start;">
        <div class="input-group" style="width: 380px;">
            <label class="input-group-text" for="workname">Наименование работ:</label>
            <input class="form-control" type="text" name="workname" maxlength="100" required>
        </div>
        
        <div class="input-group" style="width: 180px;">
            <label class="input-group-text" for="unit">Ед. изм.:</label>
            <select class="form-select" id="unit">
                <option value="1">шт.</option>
                <option value="2">комп.</option>
                <option value="3">л.</option>
                <option value="3">кг.</option>
                <option value="3">м.</option>
            </select>
        </div>

    
        <div class="input-group" style="width: 180px;">
            <label class="input-group-text" for="quantity">Количество:</label>
            <input class="form-control" type="number" name="quantity" min="1" value='1' style="width: 50px;" required>
        </div>
</div>
          `;
          container.appendChild(newRow);
      }
  </script>

    <form method="post">
        {% csrf_token %}
        {% comment %} {{ form.as_p }} {% endcomment %}
    <div class="input-group" hidden>
        <label for="object">Object:</label>
        <input type="text" name="object" id='object' value="{{ object.id }}" readonly>
    </div>
    <div class="input-group" hidden>
        <label for="insert_date">Insert date:</label>
        <input type="text" name="insert_date" value="{{ current_datetime|date:'Y-m-d H:i:s' }}" required id="insert_date">
    </div>
  
    <div class="input-group">
        <label class="input-group-text" for="id_problem">Problem:</label>
        <textarea class="form-control" name="problem" maxlength="500" required="" id="id_problem" rows="4">{{ avr.problem }}</textarea>
    </div>

  
    <div class="input-group" hidden>
        <label for="id_work_id">Work id:</label>
        <input type="text" name="work_id" value="{{ avr.work_id|default:'' }}" maxlength="20" id="id_work_id">
    </div>


  <div id="work-rows" style="display: block;">
    <div id="work-rows-first" style="display: flex; gap: 10px; align-items: flex-start;">
        <div class="input-group" style="width: 380px;">
            <label class="input-group-text" for="workname">Наименование работ:</label>
            <input class="form-control" type="text" name="workname" maxlength="100" required>
        </div>
        
        <div class="input-group" style="width: 180px;">
            <label class="input-group-text" for="unit">Ед. изм.:</label>
            <select class="form-select" id="unit">
                <option value="1">шт.</option>
                <option value="2">комп.</option>
                <option value="3">л.</option>
                <option value="3">кг.</option>
                <option value="3">м.</option>
            </select>
        </div>

    
        <div class="input-group" style="width: 180px;">
            <label class="input-group-text" for="quantity">Количество:</label>
            <input class="form-control" type="number" name="quantity" min="1" value='1' style="width: 50px;" required>
        </div>
    </div>
</div>

<div>
<button type="button" class="btn btn-warning" onclick="addWorkRow()">+</button>
</div>


<hr>

      <button type="submit" class="btn btn-success">Сохранить</button>
      <a href="{% url 'to' %}">
        <button type="button" class="btn btn-primary">Назад</button>
      </a>
    </form>
    
</body>
</html>
