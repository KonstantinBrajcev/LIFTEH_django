<div class="card mb-4">
  <div class="card-header d-flex">
    <div>
      <h4>Диагностики</h4>
    </div>
    <div class="col d-flex justify-content-end align-items-center">
      <a href="{% url 'diagnostic_add' %}" class="btn btn-primary">Добавить диагностику</a>
    </div>
  </div>

  <div class="card-body" style="padding: 0px; min-height: 50px;">
    <table class="table-hover" style="width: 100%;">
      <thead class="table-light">
        <tr style="background-color: #de4c15;">
          {% comment %} <th style="text-align: center;">№</th> {% endcomment %}
          <th style="text-align: center;">Заказчик</th>
          <th style="text-align: center;">Адрес</th>
          <th style="text-align: center;">Cоздано</th>
          <th style="text-align: center;">Выполнено</th>
          <th style="text-align: center;">Результат</th>
          <th style="text-align: center;">Действия</th>
        </tr>
      </thead>
      <tbody>
        {% for diagnostic in diagnostics %}
        <tr>
          {% comment %} <td style="text-align: center;">{{ diagnostic.id }}</td> {% endcomment %}
          <td style="text-align: center;">{{ diagnostic.object.customer|default:"-" }}</td>
          <td style="text-align: center;">{{ diagnostic.object.address|default:"-" }}</td>
          <td style="text-align: center;">{{ diagnostic.insert_date|date:"d.m.Y H:i" }}</td>
          <td style="text-align: center;">{{ diagnostic.estimate_date|date:"d.m.Y H:i" }}</td>
          <td style="text-align: center;">{{ diagnostic.result|default:"-" }}</td>

          <td style="text-align: center;">
            <div class="btn-group btn-group" style="gap: 2px;">
              <a href="{% url 'diagnostic_edit' pk=diagnostic.id %}" class="btn btn-secondary">✏</a>
              <button type="button" class="btn btn-danger" 
                onclick="if(confirm('Удалить диагностику?')) { document.getElementById('delete-diagnostic-{{ diagnostic.id }}').submit(); }">
                <form id="delete-diagnostic-{{ diagnostic.id }}" 
                  method="post" action="{% url 'diagnostic_delete' pk=diagnostic.id %}" 
                  style="display: none;">
                  {% csrf_token %}
                </form>
                <strong>X</strong>
              </button>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" style="text-align: center;">Нет данных о диагностике</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
